"use strict";(self.webpackChunkrace=self.webpackChunkrace||[]).push([[938],{342:(e,t,s)=>{s.d(t,{A:()=>c});s(43);var a=s(579);const c=e=>{let{id:t,handleChange:s}=e;return(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:t,children:[t,":"]}),(0,a.jsx)("input",{type:"text",id:t,name:t,onChange:s})]})}},259:(e,t,s)=>{s.d(t,{Ip:()=>n,ZB:()=>o,i_:()=>r});var a=s(555),c=s(904);const n=(e,t)=>{const{name:s,value:c}=e.target;let n=c.split(","),o=[];n.forEach((e=>{if(e.replace(/^\s+|\s+$/gm,""),e.length>1){let t=e.charAt(0).toUpperCase()+e.slice(1);o.push(t)}})),console.log(s+o),t((e=>(0,a.A)((0,a.A)({},e),{},{[s]:o})))},o=(e,t)=>{const{name:s,value:c}=e.target;t((e=>(0,a.A)((0,a.A)({},e),{},{[s]:c})))},r=(e,t,s,a)=>new Promise((async(n,o)=>{const r=[];for(const l of e)try{const e=c.QI.ref("".concat(s,"/").concat(t,"/").concat(l.name)).put(l);e.on("state_changed",(e=>{const t=Math.round(e.bytesTransferred/e.totalBytes*100);a(t)}),(e=>{o(e)})),await e;const n=await e.snapshot.ref.getDownloadURL();r.push(n)}catch(i){o(i)}a(90),n(r)}))},938:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(43),c=s(904),n=s(579);const o=()=>{const[e,t]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,c.Jd)();t(e)}catch(e){console.error("Error fetching car data:",e)}})()}),[]);return(0,n.jsx)("div",{children:e.map((s=>(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:s.id}),(0,n.jsx)("p",{children:s.title}),(0,n.jsx)("button",{onClick:()=>(async s=>{try{await(0,c.mC)(s),console.log("Car data deleted");const a=e.filter((e=>e.id!==s));t(a)}catch(a){console.error("Error deleting car data:",a)}})(s.id),children:"Delete"})]},s.id)))})};var r=s(342),i=s(259);const l=e=>{let{carData:t,onUpdate:s,isUpdating:c,onClose:o}=e;const[l,d]=(0,a.useState)(t),u=(0,a.useMemo)((()=>["title","year","make","model","price","exteriorColor","interior","interiorColor","bodyType","fuelEconomy","cylinder","driveTrain","transmission","vin","trim","engine","mileage","stock","spec1","spec2","spec3","spec4","spec5","spec6","spec7","spec8","spec9","spec10"]),[]),h=(0,a.useRef)(1);(0,a.useEffect)((()=>{1===h.current&&setTimeout((()=>{u.forEach(((e,s)=>{const a=document.getElementById(e);a&&(a.value=t[e]),s===u.length-1&&(h.current=0)}))}),200)}),[u,t]);return(0,n.jsx)("div",{className:"overlay",children:(0,n.jsx)("div",{className:"overlay-content",children:(0,n.jsxs)("div",{className:"update-form",children:[(0,n.jsx)("h2",{children:"Update Car Data"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(l)},children:[["title","year","make","model","price","exteriorColor","interior","interiorColor","bodyType","fuelEconomy","cylinder","driveTrain","transmission","vin","trim","engine","mileage","stock"].map((e=>(0,n.jsx)(r.A,{id:e,handleChange:e=>(0,i.ZB)(e,d)},e))),["spec1","spec2","spec3","spec4","spec5","spec6","spec7","spec8","spec9","spec10"].map((e=>(console.log(e+l[e]),(0,n.jsx)(r.A,{id:e,handleChange:e=>(0,i.Ip)(e,d)},e)))),(0,n.jsx)("button",{type:"submit",disabled:c,children:c?"Updating...":"Update"})]}),(0,n.jsx)("button",{className:"close-button",onClick:o,children:"Close"})]})})})},d=e=>{let{SelectedCar:t,field:s,onClose:o}=e;const[r,i]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{const e=c.kA.collection("cars").doc(t.id),a=await e.get();if(a.exists){const e=a.data();i(e[s]),console.log(e[s])}}catch(e){console.error("Error fetching image URLs:",e)}})()}),[t.id,s]);return(0,n.jsx)("div",{className:"overlay",children:(0,n.jsx)("div",{className:"overlay-content",children:(0,n.jsxs)("div",{className:"update-form",children:[(0,n.jsx)("h2",{children:"Update Car Data"}),(0,n.jsx)("input",{type:"file",multiple:!0,onChange:async e=>{const a=e.target.files[0];try{const n=c.QI.ref("".concat(t.timestamp,"/").concat(s)).child("".concat(a.name));await n.put(a);const o=await n.getDownloadURL(),l=[...r,o],d=c.kA.collection("cars").doc(t.id);await d.update({[s]:l}),i(l),e.target.value=""}catch(n){console.error("Error uploading image:",n)}}}),(0,n.jsx)("div",{className:"App",children:(0,n.jsx)("div",{className:"image-container",children:r&&r.length>0?r.map(((e,a)=>(0,n.jsxs)("div",{className:"image-wrapper",children:[(0,n.jsx)("div",{onClick:()=>(async e=>{try{const a=r.filter((t=>t!==e));i(a);const n=c.kA.collection("cars").doc(t.id);await n.update({[s]:a});const o=c.QI.refFromURL(e);console.log("str "+e),await o.delete()}catch(a){console.error("Error removing image:",a)}})(e),className:"cross-button",children:"\u2715"}),(0,n.jsx)("img",{src:e,alt:"emge ".concat(a),className:"thumbnail"})]},a))):"No images available"})}),(0,n.jsx)("button",{className:"close-button",onClick:o,children:"Close"})]})})})},u=e=>{let{SelectedCar:t,field:s,onClose:o}=e;const[r,i]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{const e=c.kA.collection("cars").doc(t.id),a=await e.get();if(a.exists){const e=a.data();i(e[s]),console.log(e[s])}}catch(e){console.error("Error fetching image URLs:",e)}})()}),[t.id,s]);return(0,n.jsx)("div",{className:"overlay",children:(0,n.jsx)("div",{className:"overlay-content",children:(0,n.jsxs)("div",{className:"update-form",children:[(0,n.jsx)("h2",{children:"Update Car Data"}),(0,n.jsx)("input",{type:"file",multiple:!0,onChange:async e=>{const a=e.target.files[0];try{const n=c.QI.ref("".concat(t.timestamp,"/").concat(s)).child("".concat(a.name));await n.put(a);const o=await n.getDownloadURL(),l=[...r,o],d=c.kA.collection("cars").doc(t.id);await d.update({[s]:l}),i(l),e.target.value=""}catch(n){console.error("Error uploading image:",n)}}}),(0,n.jsx)("div",{className:"App",children:(0,n.jsx)("div",{className:"image-container",children:r&&r.length>0?r.map(((e,a)=>(0,n.jsxs)("div",{className:"image-wrapper",children:[(0,n.jsx)("div",{onClick:()=>(async e=>{try{const a=r.filter((t=>t!==e));i(a);const n=c.kA.collection("cars").doc(t.id);await n.update({[s]:a});const o=c.QI.refFromURL(e);console.log("str "+e),await o.delete()}catch(a){console.error("Error removing image:",a)}})(e),className:"cross-button",children:"\u2715"}),(0,n.jsx)("video",{src:e,controls:!0,poster:t.frontimages,className:"thumbnail"})]},a))):"No images available"})}),(0,n.jsx)("button",{className:"close-button",onClick:o,children:"Close"})]})})})},h=()=>{const[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(null),[r,i]=(0,a.useState)(0),[h,p]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{const e=await(0,c.Jd)();t(e)}catch(e){console.error("Error fetching car data:",e)}})()}),[]);const m=()=>{o(null)};return(0,n.jsxs)("div",{children:[e.map((e=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["id = ",e.id]}),(0,n.jsxs)("p",{children:["Title : ",e.title]}),(0,n.jsx)("button",{onClick:()=>(e=>{o(e),i(0)})(e),children:"Details"}),(0,n.jsx)("button",{onClick:()=>(e=>{o(e),i(1)})(e),children:"front"}),(0,n.jsx)("button",{onClick:()=>(e=>{o(e),i(2)})(e),children:"other"}),(0,n.jsx)("button",{onClick:()=>(e=>{o(e),i(3)})(e),children:"Videos"})]},e.id))),s&&0===r&&(0,n.jsx)(l,{carData:s,onUpdate:async s=>{p(!0);try{await(0,c.EW)(s),console.log("Car data updated");const a=e.map((e=>e.id===s.id?s:e));t(a),o(null)}catch(a){console.error("Error updating car data:",a)}p(!1)},onClose:m,isUpdating:h}),s&&1===r&&(0,n.jsx)(d,{SelectedCar:s,field:"frontimages",onClose:m}),s&&2===r&&(0,n.jsx)(d,{SelectedCar:s,field:"images",onClose:m}),s&&3===r&&(0,n.jsx)(u,{SelectedCar:s,field:"videos",onClose:m})]})};var p=s(146);const m=a.lazy((()=>s.e(808).then(s.bind(s,808)))),g=a.lazy((()=>s.e(588).then(s.bind(s,588)))),x=()=>{const[e,t]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!0),[r,i]=(0,a.useState)("login");if((0,a.useEffect)((()=>{setTimeout((()=>{c(!1)}),1e3)}),[]),s)return(0,n.jsx)("div",{children:"Loading..."});const l=()=>{t(!0)};if(!e)return(0,n.jsx)(g,{state:l});return(0,n.jsxs)(p.Pg,{children:[(0,n.jsxs)(p.Bx,{children:[(0,n.jsx)(p.ah,{active:"add"===r?"true":void 0,onClick:()=>i("add"),children:"Add"}),(0,n.jsx)(p.ah,{active:"delete"===r?"true":void 0,onClick:()=>i("delete"),children:"delete"}),(0,n.jsx)(p.ah,{active:"update"===r?"true":void 0,onClick:()=>i("update"),children:"update"}),(0,n.jsx)(p.ah,{active:"logout"===r?"true":void 0,onClick:()=>i("logout"),children:"logout"})]}),(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(()=>{switch(r){case"add":return(0,n.jsxs)("div",{children:[" ",(0,n.jsx)(m,{})," "]});case"delete":return(0,n.jsxs)("div",{children:[" ",(0,n.jsx)(o,{})," "]});case"update":return(0,n.jsxs)("div",{children:[" ",(0,n.jsx)(h,{})]});case"logout":return(0,n.jsx)("div",{children:"I am Logout"});default:return null}})()})]})}}}]);
//# sourceMappingURL=938.00a45c8e.chunk.js.map